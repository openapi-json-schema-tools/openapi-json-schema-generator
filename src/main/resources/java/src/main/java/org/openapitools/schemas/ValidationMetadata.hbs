package {{{packageName}}}.schemas;

import {{{packageName}}}.configurations.SchemaConfiguration;
import java.util.List;
import java.util.Map;
import java.util.Set;

public record ValidationMetadata(
        List<Object> pathToItem,
        SchemaConfiguration configuration,
        Map<List<Object>, Map<Class<?>, Void>> validatedPathToSchemas,
        Set<Class<?>> seenClasses
) {

    protected boolean validationRanEarlier(Class<?> cls) {
        Map<Class<?>, Void> validatedSchemas = validatedPathToSchemas.getOrDefault(pathToItem, null);
        if (validatedSchemas != null && validatedSchemas.containsKey(cls)) {
            return true;
        }
        if (seenClasses.contains(cls)) {
            return true;
        }
        return false;
    }

}